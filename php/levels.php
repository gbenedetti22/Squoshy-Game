<?php

session_start();
/*
 * Legenda:
 * 0 -> vuoto
 * 1 -> piattaforma
 * 2 -> coin
 * 3 -> nemici
 * 4 -> torretta
 * 5 -> uccello
 * 6 -> vittoria
 * 7 -> checkpoint
 */

const LEVELS = array(
    1 => [
        "000000000000000000000000000000000",
        "000000000000000000200000000000000",
        "000000000007000001110000000000000",
        "000020001111000000000000000100006",
        "111111111111111111111000111111111",
    ],
    2 => [
        "000000000000000000000000000000000000000000000000",
        "000000000000000000000000020000005000000000000000",
        "000000000000000000000001111110000000000000000000",
        "000000000000000007000031000000000000000000000000",
        "000003201000010001001001100000000020000000300000",
        "000111111001001000000000000000000110001100100006",
        "111111110001000000000000000000000000000000000001",
    ],
    3 => [
        "0000000000000000200000000000",
        "0000500000000000111000000000",
        "0000000000030001100000000000",
        "000000020011100000000000000000000000000000000000",
        "000000110070003000011100700040000001020300010006",
        "111111111111111111111111111111111111111111111111",
    ]
);

if (!isset($_SESSION['levels'])) {
    $_SESSION['levels'] = count(LEVELS);
}

$response = array("lastLevel" => isLastLevel(), "level" => LEVELS[$_SESSION['username']->currentLevel]);

header("Content-Type: application/json");
echo json_encode($response);
exit();

function isLastLevel()
{
    return $_SESSION['username']->currentLevel == count(LEVELS);
}